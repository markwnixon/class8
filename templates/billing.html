{% extends 'layout_portal.html' %}

{% block body %}
<form action="{{ url_for ('Billing') }}" method="post">
<div class="table-responsive">
<div class="row">

<div class="col-sm-{{leftsize}}">



  {% if leftscreen == 0 %}


    <div class="row">
        <div class="col-sm-12" align="right">
        {% if filesel=='None' %}
            There is source documentation for this bill.
        {% else %}
        Looking for: {{docref}}<br>

        <embed src="{{docref}}" width="500px" height="550px"/>
        {% endif %}
        </div>
    </div>
    <input type = "hidden" name ="topvalue1" value= "{{t[0]}}">
    <input type = "hidden" name ="botvalue1" value= "{{s[0]}}">
    <input type = "hidden" name ="topvalue2" value= "{{t[1]}}">
    <input type = "hidden" name ="botvalue2" value= "{{s[1]}}">
    <input type = "hidden" name ="topvalue3" value= "{{t[2]}}">
    <input type = "hidden" name ="botvalue3" value= "{{s[2]}}">
    <input type="hidden" value="{{search11}}" name="find11">
    <input type="hidden" value="{{search12}}" name="find12">
    <input type="hidden" value="{{search13}}" name="find13">
    <input type="hidden" value="{{search14}}" name="find14">
    <input type="hidden" value="{{search21}}" name="find21">
    <input type="hidden" value="{{search22}}" name="find22">
    <input type="hidden" value="{{reach}}" name="reach">

    {% elif leftscreen == 2 %}
        {% set weekstop = [6, 13, 20, 27, 34, 41, 48, 55, 62, 69, 76, 83, 90, 97, 104, 111] %}
        {% set dweeks = nweeks[0] + nweeks[1] %}
        <div class="row">
            <div class="col-sm-12" align="center">
                <table class="table table-condensed ">
                    <tr>
                        {% for i in range(dweeks*7) %}
                            {% set name = caldays[i] %}
                            {% if name[0]=='X' %}
                                <td align="center">
                                <h6><b><u><div class='text-primary'>{{name[1:]}}</div></u></b></h6>
                            {% else %}
                                <td align="center">
                                <h6><b> <u> {{name}}</u> </b> </h6>
                            {% endif %}

                            {% for j in range(4) %}
                                {% set k=4*i+j %}
                                {% set ilist=daylist[k] %}
                                {% if ilist %}

                                    {% set maxlen=ilist[2]|length+ilist[1]|length-2 %}
                                    {% set top = ilist[0] %}
                                    {% set colpick = ilist[3] %}
                                    <table><tr>
                                      <td >
                                      {% if colpick[0]=='U' %}
                                            <input type ="submit" name="PayB2" value="{{ilist[4]}}" class="but btn-danger btn-xs">
                                      {% else %}
                                            <input type ="submit" name="Modify2" value="{{ilist[4]}}" class="but btn-success btn-xs">
                                      {% endif %}
                                      </td>
                                      <td>

                                    {% if colpick[0]=='U' %}
                                      <div class='text-danger'>
                                    {% else %}
                                       <div class='text-success'>
                                    {% endif %}
                                        {% if top|length >maxlen %}{{ top[0:maxlen] }}{% else %} {{ top }}{% endif %}
                                         </div>
                                        </td></tr>
                                        <tr><td colspan="2">
                                    {{ ilist[2] }} &nbsp ${{ ilist[1] }}
                                        </td></tr>

                                    </table>
                                {% endif %}
                            {% endfor %}
                            </td>
                            {% if i in weekstop %}
                                <td align="left"><h6> <b><u> Wk Sum</u></b></h6>
                                {% set wk = (i-6)/7 %}
                                {% set weekly = weeksum[wk|int] %}
                                {% for sum in weekly %}
                                    {{sum[0]}} ${{sum[1]}}<br>
                                {% endfor %}
                                </td> </tr>  <tr>
                            {% endif %}
                        {% endfor %}
                </table>
            </div>
        </div>
    <input type = "hidden" name ="topvalue1" value= "{{t[0]}}">
    <input type = "hidden" name ="botvalue1" value= "{{s[0]}}">
    <input type = "hidden" name ="topvalue2" value= "{{t[1]}}">
    <input type = "hidden" name ="botvalue2" value= "{{s[1]}}">
    <input type = "hidden" name ="topvalue3" value= "{{t[2]}}">
    <input type = "hidden" name ="botvalue3" value= "{{s[2]}}">
    <input type="hidden" value="{{search11}}" name="find11">
    <input type="hidden" value="{{search12}}" name="find12">
    <input type="hidden" value="{{search13}}" name="find13">
    <input type="hidden" value="{{search14}}" name="find14">
    <input type="hidden" value="{{search21}}" name="find21">
    <input type="hidden" value="{{search22}}" name="find22">
    <input type="hidden" value="{{reach}}" name="reach">

  {% else %}

  <div class="row">
    <div class="col-sm-12" align="center" style="font-weight:bold"> Billing Data </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
        <table class="table table-striped table-bordered table-condensed table-hover">
            <tr align="center" style="font-weight:bold">
                <td align="center">ID</td>
                <td align="center">Code</td>
                <td align="center">Type</td>
                <td align="center">Class</td>
                <td align="center">Pid</td>
                <td align="center">Receiving Entity</td>
                <td align="center">Memo</td>
                <td align="center">Bill Amount</td>
                <td align="center">Bill Date</td>
                <td align="center">Reference</td>
                <td align="center">Paid Amount</td>
                <td align="center">From Account</td>
                <td align="center">On Date</td>
                <td align="center">Status</td>
                <td align="right">Chk</td>
            </tr>
            {% for data in data1 %}
            <tr{% if data.Status[0] == 'P' %} class="text-success"
                {% elif data.bDate < critday %} class="text-danger"
                {% elif data.Status == 'Unpaid' %} class="text-primary" {% endif %}>
                <td align="center">{{ data.id }}</td>
                <td align="center">{{ data.Jo }}</td>
                <td align="center">{{ data.bType }}</td>
                <td align="center">{{ data.bClass }}</td>
                <td align="center">{{ data.Pid}}</td>
                <td align="center">{{ data.Company[0:18]}}</td>
                <td align="center">{{ data.Memo}}</td>
                <td align="center">{{ data.bAmount}}</td>
                <td align="center">{{ data.bDate }}</td>
                <td align="center">{{ data.Ref}}</td>
                <td align="center">{{ data.pAmount}}</td>
                <td align="center">{{ data.Account}}</td>
                <td align="center">{{ data.pDate}}</td>
                <td align="center">{{ data.Status}}</td>
                <td align="right"><input type="checkbox" name="bill{{data.id}}" value="{{data.id}}"></td>
            </tr>
            {% endfor %}
            <div class="col-xs-2">
            <tr>
                <td colspan="5"> <input type ="submit" name="dn1" value="DN"> <input type = "hidden" name ="topvalue1" value= "{{t[0]}}">
                    <input type ="submit" name="up1" value="UP"> <input type = "hidden" name ="botvalue1" value= "{{s[0]}}">
                     Showing: {{s[0]}} To {{t[0]}} of {{u[0]}}
                    &nbsp <input type="text" name="reach" value={{reach}} style="width:20px;"/>

                </td>
                <td colspan="10" align="right">
                Filters: Class <input type="search" value="{{search11}}" name="find11" style="width:99px;"/> &nbsp &nbsp
                Date <input type="search" value="{{search12}}" name="find12" style="width:99px;"/> &nbsp &nbsp
                Entity <input type="search" value="{{search13}}" name="find13" style="width:99px;"/> &nbsp &nbsp
                Status <input type="search" value="{{search14}}" name="find14" style="width:99px;"/>
                </td>

            </tr>
        </div>
        </table>
    </div>
</div>


<div class="row">
    <div class="col-sm-12" align="center" style="font-weight:bold">Vendors</div>
</div>

<div class="row">
  <div class="col-sm-12">
    <table class="table table-striped table-bordered table-condensed table-hover">
            <tr align="center" style="font-weight:bold">
                <td align="center">ID</td>
                <td align="left">Exp Type</td>
                <td align="left">Class</td>
                <td align="left">Entity (Payee)</td>
                <td align="left">Addr1</td>
                <td align="left">Addr2</td>
                <td align="left">Phone</td>
                <td align="left">Email</td>
                <td align="right">Chk</td>
            </tr>
            {% for data in data2 %}
            <tr>
                <td align="center">{{data.id}}</td>
                <td align="left">{{ data.Associate1 }}</td>
                <td align="left">{{ data.Associate2 }}</td>
                <td align="left">{{ data.Company }}</td>
                <td align="left">{{ data.Addr1}}</td>
                <td align="left">{{ data.Addr2}}</td>
                <td align="left">{{ data.Telephone}}</td>
                <td align="left">{{ data.Email}}</td>
                <td align="right"><input type="checkbox" name="peep{{data.id}}" value="{{data.id}}">
            </tr>
            {% endfor %}
            <tr>
                <td colspan="4"> <input type ="submit" name="dn2" value="DN"> <input type = "hidden" name ="topvalue2" value= "{{t[1]}}">
                <input type ="submit" name="up2" value="UP"> <input type = "hidden" name ="botvalue2" value= "{{s[1]}}">
                   Showing {{s[1]}} To {{t[1]}} of {{u[1]}}</td>

                <td colspan="5" align="right"><input type ="submit" name="addentity" value="ADD">&nbsp &nbsp
                Filter Entity: <input type="search" value="{{search21}}" name="find21">&nbsp &nbsp
                Class <input type="search" value="{{search22}}" name="find22">
                </td>
            </tr>
        </table>
</div>
</div>


{% endif %}

</div>





<div class="col-sm-{{rightsize}}">
       <div class="row">
           <div class="col-sm-12"  align="center" style="font-weight:bold">Control Panel</div>
       </div>
       <div class="row">
           <div class="col-sm-12">
               <table>
               <tr class="small text-danger"><td>Messages</td></tr>
                {% for e in err %}
                <tr><td>{{e}}</td></tr>
                {% endfor %}
               </table>





           </div>
       </div>
       <div class="row">
           <div class="col-sm-12">

 <!--Control Buttons for a Modification Initiated-->
            {% if ( (( bill > 0 or peep > 0 ) and modlink==1)) or modlink>5 %}
               <p class="small">Modify Bill/Payment {{modata.Jo}}
                <button type="submit" class="btn btn-secondary" name="Update">Update</button>
                &nbsp &nbsp
                <button type="submit" class="btn btn-primary" name="Return">Return</button>
                </p>
               modlink{{modlink}}bill{{bill}}

 <!--Control Buttons for the Calendar-->
            {% elif leftscreen == 2 %}
             <table>
               <tr>
                   <td><div class="input-group-text">WksBef</div></td>
                   <td><input class="form-control" type="text" name="wbef" value={{nweeks[0]}}></td>
               </tr>
                <tr>
                   <td><div class="input-group-text">WksAft</div></td>
                   <td><input class="form-control" type="text" name="waft" value={{nweeks[1]}}></td>
               </tr>
                <tr>
                <td>
                <button type="submit" class="btn btn-secondary" name="calupdate">Update</button>
                </td>
                <td>
                <button type="submit" class="btn btn-primary" name="Return">Return</button>
                </td>
                </tr>
              </table>

  <!--Main Control Panel Buttons-->
            {% elif (modlink != 4) and (modlink != 3) %}
               <table class="table table-condensed">
                <tr align="center">
                    <td><button type="submit" class="btn btn-primary btn-sm" name="Match">Match</button></td>
                    <td><button type="submit" class="btn btn-primary btn-sm" name="Modify">qMod</button></td>
                    <td><button type="submit" class="btn btn-primary btn-sm" name="Vmod">vMod</button></td>
                </tr>
                   <tr><td colspan='3'>&nbsp</td></tr>
                <tr align="center">
                    <td> <button type="submit" class="btn btn-secondary btn-sm" name="ViewO">oView</button></td>
                    <td> <button type="submit" class="btn btn-secondary btn-sm" name="NewB">NewB</button></td>
                    <td> <button type="submit" class="btn btn-secondary btn-sm" name="Xfer">Xfer</button></td>
                </tr>
                <tr><td colspan='3'>&nbsp</td></tr>
                <tr align="center">
                    <td> <button type="submit" class="btn btn-success btn-sm" name="PayB">PayB</button></td>
                    <td> <button type="submit" class="btn btn-success btn-sm" name="Prt">PrCk</button></td>
                    <td> <button type="submit" class="btn btn-danger btn-sm" name="Delete">&nbspDEL&nbsp</button></td>
                </tr>
                <tr><td colspan='3'>&nbsp</td></tr>
                <tr><td colspan='3' align="center">
                <button class="but btn-warning btn-sm" type ="submit" name="Calendar">Calendar</button>
                <button class="but btn-secondary btn-sm" type ="submit" name="Return">Return</button></td></tr>
               </table>
               <table>
                   <tr align="center">
                        <td>Instructions and Debug Vals</td>
                   </tr>

                    <tr align="left"><td>Green = Bill Paid</td></tr>
                    <tr align="left"><td>Red = Due within Week</td></tr>
                    <tr align="left"><td>&nbsp</td></tr>
                    <tr align="left"><td>Debugging Information</td></tr>
                    <tr align="left"><td>critday={{critday}}</td></tr>
                     {% if vdata != 0 %}
                        {% for data in vdata %}
                   <tr align="left"><td>vdata is {{data}}</td></tr>
                        {% endfor %}
                     {% endif %}
                   <tr align="left"><td>bill={{bill}}</td></tr>
                   <tr align="left"><td>peep={{peep}}</td></tr>
                   <tr align="left"><td>modlink={{modlink}}</td></tr>
                   <tr align="left"><td>monsel={{monsel}}</td></tr>
                   <tr align="left"><td>invooder={{invooder}}</td></tr>
                   <tr align="left"><td>invo={{invo}}</td></tr>
                   <tr align="left"><td>leftsize={{leftsize}}</td></tr>
               </table>
               {% elif modlink==3 %}

<!--New Xfer Input Replaces Control Buttons-->
               <table class="table table-condensed table-hover">
               <tbody>
                <tr>
                  <td><div class="input-group-text">Xfer From:</div></td>
                  <td>
                    <select class="form-control" type="text" name="fromacct">
                    {% for data in adata %}
                      <option value="{{data.Name}}" > {{data.Name}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>
                <tr>
                  <td><div class="input-group-text">Xfer To:</div></td>
                  <td>
                    <select class="form-control" type="text" name="toacct">
                    {% for data in adata %}
                      <option value="{{data.Name}}" > {{data.Name}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>
                <tr>
                    <td><div class="input-group-text">Description:</div></td>
                    <td><textarea class="form-control" type="text" name="bdesc" rows="3">{{vdata[0]}}</textarea></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Amount:</div></td>
                   <td><input class="form-control" type="text" name="bamt" value="{{vdata[2]}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Check Memo:</div></td>
                   <td><input class="form-control" type="text" name="ckmemo" value="{{vdata[1]}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Check or Ref#:</div></td>
                   <td><input class="form-control" type="text" name="bref" value="{{vendor_ref}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Date:</div></td>
                   <td><input class="form-control" type="date" name="bdate" value="{{vdata[3]}}"></td>
                </tr>
                 <tr>
                  <td colspan="2">
                    <button type="submit" class="btn btn-primary" name="ThisXfer">Create Xfer</button>
                    <button type="submit" class="btn btn-danger"  name="Return">Return</button>
                  </td>
                </tr></tbody></table>

               {% else %}
<!--New Bill Input Replaces Control Buttons-->
               <table class="table table-condensed table-hover">
               <tbody>
               <tr>
                 <td colspan="2">
                 <input type = "hidden" name="modlink" value="{{modlink}}">
                 <select class="form-control" type="text" name="FileSel" onchange="this.form.submit()">
                    <option value='1'>Choose Source Document for New Bill</option>
                    <option value='None' {% if filesel == 'None' %} selected {% endif %}>None</option>
                    {% for data in fdata %}
                    <option {% if filesel == data %} selected {% endif %}  value={{data}}> {{data}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>
                <tr>
                  <td><div class="input-group-text">From Vendor:</div></td>
                  <td>
                    <select class="form-control" type="text" name="thiscomp">
                      <option selected value='1'>Choose Later</option>
                    {% for data in cdata %}
                      <option {% if cdat.Company == data.Company %} selected {% endif %} value="{{data.Company}}" > {{data.Company}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>

                <tr>
                   <td><div class="input-group-text">Expense Type:</div></td>
                   <td><select class="form-control" type="text" name="btype" onchange="this.form.submit()">
                        <option value='0'>Select Option</option>
                        <option {% if cdat.Associate1 == 'G-A' %} selected {% endif %} value='G-A'>G&A</option>
                        <option {% if cdat.Associate1 == 'Direct' %} selected {% endif %} value='Direct'>Direct</option>
                        <option {% if cdat.Associate1 == 'JobSp' %} selected {% endif %} value='JobSp'>Job Specific</option>
                        <option {% if cdat.Associate1 == 'PassTh' %} selected {% endif %} value='PassTh'>
                            Pass Through </option>
                       </select>
                      </td>
                </tr>

                {% if cdat.Associate1 == 'G-A' %}
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="bclass">
                            {% for s in classdata %}
                            <option {% if cdat.Associate2 == s %} selected {% endif %} value={{s}}>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}
                    {% if cdat.Associate1 == 'Direct' %}
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="bclass">
                            {% for s in directdata %}
                            <option {% if cdat.Associate2 == s %} selected {% endif %} value={{s}}>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}
                    {% if cdat.Associate1 == 'PassTh' %}
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="bclass">
                            {% for s in passdata %}
                            <option {% if cdat.Associate2 == s %} selected {% endif %} value={{s}}>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}
                    {% if cdat.Associate1 == 'JobSp' %}
                    <tr>
                        <td> <div class="input-group-text">Job Category:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="jobcat" onchange="this.form.submit()">
                            <option {% if cdat.Temp1 == 'Overseas' %} selected {% endif %} value='Overseas'>Overseas</option>
                            <option {% if cdat.Temp1 == 'Trucking' %} selected {% endif %} value='Trucking'>Trucking</option>
                            <option {% if cdat.Temp1 == 'Moving' %} selected {% endif %} value='Moving'>Moving</option>
                            <option {% if cdat.Temp1 == 'Storage' %} selected {% endif %} value='Storage'>Storage</option>
                            <option {% if cdat.Temp1 == 'Horizon' %} selected {% endif %} value='Horizon'>Horizon</option>
                          </select>
                        </td>
                    </tr>
                    <tr>
                        <td> <div class="input-group-text">Job Selection:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="jobselect">
                            {% if jobdata %}
                            {% for s in jobdata %}
                            <option {% if cdat.Temp2 == s.Jo %} selected {% endif %} value={{s.Jo}}>{{s.Label}}</option>
                            {% endfor %}
                              {% endif %}
                          </select>
                        </td>
                    </tr>
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="bclass">
                            {% for s in directdata %}
                            <option {% if cdat.Associate2 == s %} selected {% endif %} value={{s}}>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}

                <tr>
                    <td><div class="input-group-text">Bill Description:</div></td>
                    <td><textarea class="form-control" type="text" name="bdesc" rows="3">{{vdata[0]}}</textarea></td>
                </tr>

                <tr>
                   <td><div class="input-group-text">Bill Amount:</div></td>
                   <td><input class="form-control" type="text" name="bamt" value="{{vdata[2]}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Check Memo:</div></td>
                   <td><input class="form-control" type="text" name="ckmemo" value="{{vdata[1]}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Reference:</div></td>
                   <td><input class="form-control" type="text" name="bref" value="{{vendor_ref}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Due Date:</div></td>
                   <td><input class="form-control" type="date" name="bdate" value="{{vdata[3]}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Paid Amount:</div></td>
                   <td><input class="form-control" type="text" name="pamt" value="0.00"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Paid Date:</div></td>
                   <td><input class="form-control" type="date" name="pdate" value="{{today}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">From Account:</div></td>
                   <td>
                    <select class="form-control" type="text" name="crataccount">
                      <option value='1'>Choose Later</option>
                    {% for data in adata %}
                      <option value="{{data.Name}}" > {{data.Name}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Bill for Company:</div></td>
                   <td>
                    <select class="form-control" type="text" name="ctype">
                      <option value='F'>  FEL  </option>
                      <option value="H" > Horizon </option>
                      <option value="M" > Moonbounce </option>
                      <option value="J" > Jays Auto </option>
                    </select>
                  </td>
                </tr>




                <tr>
                  <td colspan="2">
                    <button type="submit" class="btn btn-primary" name="ThisBill">Create Bill</button>
                    <button type="submit" class="btn btn-secondary" name="addentity2">Add Vendor</button>
                    <button type="submit" class="btn btn-danger"  name="Return">Return</button>
                  </td>
                </tr></tbody></table>



            {% endif %}
           </div>
       </div>


       <div class="row">
           <div class="col-sm-12">

 <!--Modify a Bill-->
        {% if (bill > 0 and modlink == 1) or modlink == 7 or modlink == 6 %}
            <table class="table table-condensed table-hover">
            <tbody>
            {% set ifxfer=modata.bType %}
            {% if ifxfer=='XFER' %}
                <tr>
                   <td><div class="input-group-text">From Account:</div></td>
                  <td>
                    <select class="form-control" type="text" name="fromacct">
                      <option value='0'>Choose Later</option>
                    {% for data in adata %}
                      <option value="{{data.Name}}" {% if modata.Account == data.Name %} selected {% endif %} > {{data.Name}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>
                <tr>
                   <td><div class="input-group-text">To Account:</div></td>
                  <td>
                    <select class="form-control" type="text" name="toacct">
                      <option value='0'>Choose Later</option>
                    {% for data in adata %}
                      <option value="{{data.Name}}" {% if modata.Company == data.Name %} selected {% endif %} > {{data.Name}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Amount:</div></td>
                  <td><input class="form-control" type="text" name="pamt" value="{{modata.pAmount}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text"> Pay Reference:</div></td>
                  <td><input class="form-control" type="text" name="bref" value="{{modata.Ref}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Paid Date:</div></td>
                  <td><input class="form-control" type="date" name="pdate" value="{{modata.pDate}}"></td>
                </tr>
                 <tr>
                   <td><div class="input-group-text">Check Memo:</div></td>
                  <td><input class="form-control" type="text" name="ckmemo" value="{{modata.Memo}}"></td>
                </tr>
                <tr>
                    <td><div class="input-group-text">Description:</div></td>
                    <td><textarea class="form-control" type="text" name="bdesc" rows="3">{{modata.Description}}</textarea></td>
                </tr>

            {% else %}
                <tr>
                 <td colspan="2">
                 <input type = "hidden" name="modlink" value="{{modlink}}">
                 <select class="form-control" type="text" name="FileSel" onchange="this.form.submit()">
                    <option value='1'>Choose Source Document for New Bill</option>
                    <option value='None' {% if filesel == 'None' %} selected {% endif %}>None</option>
                    {% for data in fdata %}
                    <option {% if filesel == data %} selected {% endif %}  value={{data}}> {{data}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>
                {% if pb == 1 %}
                <tr>
                   <td><div class="input-group-text">Paid Amount:</div></td>
                  <td><input class="form-control" type="text" name="pamt" value="{{modata.pAmount}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">From Account:</div></td>
                  <td>
                    <select class="form-control" type="text" name="account">
                      <option value='0'>Choose Later</option>
                    {% for data in adata %}
                      <option value="{{data.Name}}" {% if modata.Account == data.Name %} selected {% endif %} > {{data.Name}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>
                <tr>
                   <td><div class="input-group-text"> Pay Reference:</div></td>
                  <td><input class="form-control" type="text" name="bref" value="{{modata.Ref}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Paid Date:</div></td>
                  <td><input class="form-control" type="date" name="pdate" value="{{modata.pDate}}"></td>
                </tr>

                {% endif %}

                <tr>
                  <td><div class="input-group-text">From Vendor:</div></td>
                  <td>
                    <select class="form-control" type="text" name="thiscomp">
                      <option selected value='1'>Choose Later</option>
                    {% for data in cdata %}
                      <option value="{{data.Company}}"
                        {% if modata.Company == data.Company %} selected {% endif %}> {{data.Company}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Expense Type:</div></td>
                   <td><select class="form-control" type="text" name="btype" onchange="this.form.submit()">
                        <option value='0'>Select Option</option>
                        <option {% if modata.bType == 'G-A' %} selected {% endif %} value='G-A'>G&A</option>
                        <option {% if modata.bType == 'Direct' %} selected {% endif %} value='Direct'>Direct</option>
                        <option {% if modata.bType == 'JobSp' %} selected {% endif %} value='JobSp'>Job
                        Specific</option>
                        <option {% if modata.bType == 'PassTh' %} selected {% endif %} value='PassTh'>
                            Pass Through </option>
                       </select>
                      </td>
                    </tr>

                    {% if modata.bType == 'G-A' %}
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="bclass">
                            {% for s in classdata %}
                            <option {% if modata.bClass == s %} selected {% endif %} value='{{s}}'>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}
                    {% if modata.bType == 'Direct' %}
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="bclass">
                            {% for s in directdata %}
                            <option {% if modata.bClass == s %} selected {% endif %} value='{{s}}'>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}
                    {% if modata.bType == 'PassTh' %}
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="bclass">
                            {% for s in passdata %}
                            <option {% if modata.bClass == s %} selected {% endif %} value='{{s}}'>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}
                    {% if modata.bType == 'JobSp' %}
                    <tr>
                        <td> <div class="input-group-text">Job Category:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="jobcat" onchange="this.form.submit()">
                            <option {% if modata.Temp1 == 'Overseas' %} selected {% endif %} value='Overseas'>Overseas</option>
                            <option {% if modata.Temp1 == 'Trucking' %} selected {% endif %} value='Trucking'>Trucking</option>
                            <option {% if modata.Temp1 == 'Moving' %} selected {% endif %} value='Moving'>Moving</option>
                            <option {% if modata.Temp1 == 'Storage' %} selected {% endif %} value='Storage'>Storage</option>
                            <option {% if modata.Temp1 == 'Horizon' %} selected {% endif %} value='Horizon'>Horizon</option>
                          </select>
                        </td>
                    </tr>
                    <tr>
                        <td> <div class="input-group-text">Job Selection:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="jobselect">
                            {% if jobdata != 0 %}
                            <option {% if modata.Jo == 'TBD' %} selected {% endif %} value='TBD'>TBD</option>
                            {% for s in jobdata %}
                            <option {% if modata.Jo == s.Jo %} selected {% endif %} value={{s.Jo}}>{{s.Label}}</option>
                            {% endfor %}
                            {% endif %}
                          </select>
                        </td>
                    </tr>
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="bclass">
                            {% for s in directdata %}
                            <option {% if modata.bClass == s %} selected {% endif %} value='{{s}}'>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}
                    <tr>
                   <td><div class="input-group-text">Bill for Company:</div></td>
                   <td>
                    <select class="form-control" type="text" name="ctype">
                      <option {% if modata.Co == 'F' %} selected {% endif %} value='F'>  FEL  </option>
                      <option {% if modata.Co == 'H' %} selected {% endif %} value="H" > Horizon </option>
                      <option {% if modata.Co == 'M' %} selected {% endif %} value="M" > Moonbounce </option>
                      <option {% if modata.Co == 'J' %} selected {% endif %} value="J" > Jays Auto </option>
                    </select>
                  </td>
                </tr>

                 <tr>
                   <td><div class="input-group-text">Check Memo:</div></td>
                  <td><input class="form-control" type="text" name="ckmemo" value="{{modata.Memo}}"></td>
                </tr>

                <tr>
                    <td><div class="input-group-text">Bill Description:</div></td>
                    <td><textarea class="form-control" type="text" name="bdesc" rows="3">{{modata.Description}}</textarea></td>
                </tr>

                <tr>
                   <td><div class="input-group-text">Bill Amount:</div></td>
                  <td><input class="form-control" type="text" name="bamt" value="{{modata.bAmount}}"></td>
                </tr>
                                   <tr>
                   <td><div class="input-group-text">Bill Date:</div></td>
                  <td><input class="form-control" type="date" name="bdate" value="{{modata.bDate}}"></td>
                </tr>
                 <tr>
                 <td><div class="input-group-text">Due Date:</div></td>
                <td><input class="form-control" type="date" name="ddate" value="{{modata.dDate}}"></td>
                </tr>
                {% if pb != 1 %}
                <tr>
                   <td><div class="input-group-text">Paid Amount:</div></td>
                  <td><input class="form-control" type="text" name="pamt" value="{{modata.pAmount}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">From Account:</div></td>
                  <td>
                    <select class="form-control" type="text" name="account">
                      <option value='0'>Choose Later</option>
                    {% for data in adata %}
                      <option value="{{data.Name}}" {% if modata.Account == data.Name %} selected {% endif %} > {{data.Name}} </option>
                    {% endfor %}</select>
                  </td>
                </tr>
                <tr>
                   <td><div class="input-group-text"> Pay Reference:</div></td>
                  <td><input class="form-control" type="text" name="bref" value="{{modata.Ref}}"></td>
                </tr>
                <tr>
                   <td><div class="input-group-text">Paid Date:</div></td>
                  <td><input class="form-control" type="date" name="pdate" value="{{modata.pDate}}"></td>
                </tr>
                {% endif %}

                </tbody></table>
                    <input type = "hidden" name ="bill" value= {{bill}}>
                    <input type = "hidden" name ="modlink" value= {{modlink}}>
                    <input type = "hidden" name ="peep" value= {{peep}}>
            {% endif %}
        {% endif %}

  <!--Modify People/Company -- modlink 8 means we are adding person while entering a bill-->
            {% if (peep > 0 and modlink == 1) or modlink == 9 or modlink == 8 %}

                <table class="table table-condensed table-hover">
                <tbody>

                {% if modlink==8 and fdata != 0 %}
                <tr>
                  <td colspan="2">
                   <input type = "hidden" name="modlink" value="{{modlink}}">
                   <select class="form-control" type="text" name="FileSel" onchange="this.form.submit()">
                      <option value='1'>Choose Source Document for New Bill</option>
                      <option value='None' {% if filesel == 'None' %} selected {% endif %}>None</option>
                      {% for data in fdata %}
                      <option {% if filesel == data %} selected {% endif %}  value={{data}}> {{data}} </option>
                      {% endfor %}
                    </select>
                  </td>
                </tr>

                {% endif %}


                    <tr>
                        <td> <div class="input-group-text" align="right">Company:</div></td>
                        <td colspan="2"><input class="form-control" type="text" name="company" value="{{modata.Company}}"></td>
                    </tr>
                    <tr>
                      <td align="right"> <div class="input-group-text">Expense Type:</div></td>
                      <td colspan="2">
                       <select class="form-control" type="text" name="assoc1" onchange="this.form.submit()">
                        <option value='0'>Select Option</option>
                        <option {% if modata.Associate1 == 'G-A' %} selected {% endif %} value='G-A'>G&A</option>
                        <option {% if modata.Associate1 == 'Direct' %} selected {% endif %} value='Direct'>Direct</option>
                        <option {% if modata.Associate1 == 'JobSp' %} selected {% endif %} value='JobSp'>Job
                        Specific</option>
                        <option {% if modata.Associate1 == 'PassTh' %} selected {% endif %} value='PassTh'>
                            Pass Through </option>
                       </select>
                      </td>
                    </tr>
                    {% if modata.Associate1 == 'G-A' %}
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="assoc2">
                            {% for s in classdata %}
                            <option {% if modata.Associate2 == s %} selected {% endif %} value='{{s}}'>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}
                    {% if modata.Associate1 == 'Direct' %}
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="assoc2">
                            {% for s in directdata %}
                            <option {% if modata.Associate2 == s %} selected {% endif %} value='{{s}}'>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}
                    {% if modata.Associate1 == 'PassTh' %}
                    <tr>
                        <td> <div class="input-group-text">Classification:</div></td>
                        <td colspan="2">
                          <select class="form-control" type="text" name="assoc2">
                            {% for s in passdata %}
                            <option {% if modata.Associate2 == s %} selected {% endif %} value='{{s}}'>{{s}}</option>
                            {% endfor %}
                          </select>
                        </td>
                    </tr>
                    {% endif %}

                    <tr>
                        <td align="right"> <div class="input-group-text">Address Line1:</div></td>
                        <td colspan="2"><input class="form-control" type="text" name="addr1" value="{{modata.Addr1}}"></td>
                    </tr>
                    <tr>
                        <td> <div class="input-group-text">Address Line2:</div></td>
                        <td colspan="2"><input class="form-control" type="text" name="addr2" value="{{modata.Addr2}}"></td>
                    </tr>

                    <tr>
                        <td> <div class="input-group-text">Account Number:</div></td>
                        <td colspan="2"><input class="form-control" type="text" name="tid" value="{{modata.Idnumber}}"></td>
                    </tr>
                    <tr>
                        <td align="right"> <div class="input-group-text">Telephone:</div></td>
                        <td colspan="2"><input class="form-control" type="text" name="tel" value="{{modata.Telephone}}"></td>
                    </tr>
                    <tr>
                        <td> <div class="input-group-text">Email:</div></td>
                        <td colspan="2"><input class="form-control" type="text" name="email" value="{{modata.Email}}"></td>
                    </tr>

                    <tr>
                        <td> <div class="input-group-text">Date:</div></td>
                        <td colspan="2"><input class="form-control" type="date" name="date1" value="{{modata.Date1}}"></td>
                    </tr>
                </tbody></table>

                {% endif %}





           </div></div>



</div>



</div>
</div>
<input type = "hidden" name ="modlink" value= {{modlink}}>
<input type = "hidden" name ="peep" value= {{peep}}>
<input type = "hidden" name ="bill" value= {{bill}}>
<input type = "hidden" name ="FileSel" value= {{filesel}}>
</form>

{% endblock %}
